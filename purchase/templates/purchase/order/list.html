{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block content %}
    {% if object_list %}
        <form action="" method="post" id="select_block_form">
            <table class="table table-sm">
                <thead>
                <tr>
                    <th>状态</th>
                    <th>单号</th>
                    <th>日期</th>
                    <th>供应商</th>
                    <th>经办人</th>
                    <th>总数量</th>
                    <th>单位</th>
                    <th>更新日期</th>
                    <th>编辑</th>
                </tr>
                </thead>

                <tbody>
                {% for object in object_list %}
                    <tr id="block_list_tr">
                        <td>{{ object.state }}</td>
                        <td><a href="{{ object.get_absolute_url }}">{{ object.order }}</a></td>
                        <td>{{ object.date }}</td>
                        <td>{{ object.partner }}</td>
                        <td>{{ object.handler }}</td>
                        <td>{{ object.get_quantity }}</td>
                        <td>{{ object.uom }}</td>
                        <td>{{ object.get_amount }}</td>
                        <td>{{ object.updated }}</td>
                        <td>
                            <div class="dropdown">
                                <button type="button" class="btn btn-sm " data-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="false">
                                    ...
                                </button>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" data-toggle="modal" data-target=".bd-example-modal-sm"
                                       href="{% url 'import_block_edit' %}">修改</a>
                                    <a class="dropdown-item" href="#">Another action</a>
                                    <a class="dropdown-item" href="#">Something else here</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" href="#">Separated link</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
                <tfoot>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                </tfoot>
            </table>
            {% csrf_token %}
        </form>
    {% else %}
        <p>还未有内容</p>
    {% endif %}

{% endblock %}
{% block siderbar %}
    <ul>
        <li><input type="submit" form="select_block_form" class="btn btn-success" value="select">
        </li>
        <li><a href="{% url 'purchase_order_create_one' %}" class="btn btn-primary">新建</a></li>
        <li><a class="btn btn-primary" data-toggle="modal" data-target=".bd-example-modal-sm">Small modal</a>
        </li>

    </ul>

    <div class="modal fade bd-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="container">
                    <form id="block_form" method="post">
                        {{ form|crispy }}
                        {#                        <fieldset class="form-group">#}
                        {#                            <label for="name">编号</label>#}
                        {#                            <input type="text" name="name" class="form-control">#}
                        {#                        </fieldset>#}
                        {#                        <fieldset class="form-group">#}
                        {#                            <label for="quantity">数量</label>#}
                        {#                            <input type="number" name="quantity">#}
                        {#                            <select type="select" name="uom">#}
                        {#                                <option value="t">吨</option>#}
                        {#                                <option value="m3">立方</option>#}
                        {#                            </select>#}
                        {#                            <input type="number" name="price">#}
                        {#                            <input type="number" name="weight">#}
                        {#                            <input type="number" name="long">#}
                        {#                            <input type="number" name="width">#}
                        {#                            <input type="number" name="height">#}
                        {#                            <input type="number" name="m3">#}
                        <input id="block_form_submit" class="btn btn-primary" type="submit" value="确认">
                        {#                        </fieldset>#}
                        {% csrf_token %}
                    </form>
                </div>
            </div>
        </div>
    </div>
{#    <script type="text/javascript">#}
{#        $('#block_form').submit(function () {#}
{#            $.ajax({url:"{% url 'import_block_edit' %}",#}
{#                 type: 'POST',#}
{#                data: $(this).serialize(),#}
{#                cache: false,#}
{#                success: function (data) {#}
{#                    console.log(data);#}
{#                    //插入数据#}
{#                    var new_block = ''#}
{#                    $("#block_list_tr").append(new_block)#}
{#                },#}
{#                error: function (xhr) {#}
{#                    console.log(xhr);#}
{#                },});#}
{#            return false#}
{#        });#}


    {#</script>#}
{% endblock %}
{% block domready %}


{% endblock %}